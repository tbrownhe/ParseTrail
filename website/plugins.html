<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @ajlkn
	Customized for ParseTrail Plugins Page
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
    <title>Plugins - ParseTrail</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css" />
    </noscript>
    <script>
		fetch('version.json')
			.then(response => response.json())
			.then(data => {
				const version = data.version;
				const script = document.createElement("script");
				script.src = `assets/js/main.js?v=${version}`;
				document.head.appendChild(script);
			})
			.catch(error => console.error("Failed to fetch version:", error));
    </script>
    <script src="env.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            const fallbackApiBase = "http://localhost:8000/api/v1";
            const apiBase = (window.__BACKEND_HOST__ || fallbackApiBase).replace(/\/$/, "");
            const pluginsUrl = `${apiBase}/plugins/`;

            try {
                // Fetch available plugins
                const response = await fetch(pluginsUrl);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const plugins = await response.json();

                // Generate table rows
                const tableBody = document.getElementById("plugin-table-body");
                plugins.forEach(plugin => {
                    const row = document.createElement("tr");

                    row.innerHTML = `
                        <td>${plugin.COMPANY}</td>
                        <td>${plugin.STATEMENT_TYPE}</td>
                        <td>${plugin.PLUGIN_NAME}</td>
					`;

                    tableBody.appendChild(row);
                });
            } catch (error) {
                console.error("Error fetching plugins:", error);
                document.getElementById("plugin-section").innerHTML = "<p>Failed to load plugins. Please try again later.</p>";
            }
        });
    </script>
</head>

<body class="is-preload">

    <!-- Header -->
    <header id="header">
        <a href="index.html" class="title">ParseTrail</a>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="features.html">Features</a></li>
                <li><a href="plugins.html" class="active">Plugins</a></li>
                <li><a href="download.html">Get the App</a></li>
				<li><a class="nav-login" href="#">Open Dashboard</a></li>
				<li><a class="nav-github" href="#">View on GitHub</a></li>
            </ul>
        </nav>
    </header>

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Main -->
        <section id="main" class="wrapper">
            <div class="inner">
                <h1 class="major">Available Plugins</h1>
                <p>Below is a list of currently available plugins for ParseTrail. These plugins allow parsing of various
                    financial statements from supported institutions.</p>
                <p>If you don't see your financial institution in the list, our team can develop one for you.
                    If ParseTrail doesn't recognize a statement, you'll be given the option to securely send us an
                    encrypted copy. We'll develop a plugin for it right away. New plugins and plugin updates are
                    synchronized with ParseTrail automatically.</p>
                <section id="plugin-section">
                    <table>
                        <thead>
                            <tr>
                                <th>Company</th>
                                <th>Statement Type</th>
                                <th>Plugin Name</th>
                            </tr>
                        </thead>
                        <tbody id="plugin-table-body">
                            <!-- Dynamic content will be inserted here -->
                        </tbody>
                    </table>
                </section>
            </div>
        </section>

    </div>

    <!-- Footer -->
    <footer id="footer" class="wrapper alt">
        <div class="inner">
            <ul class="menu">
                <li>&copy; ParseTrail. All rights reserved.</li>
                <li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
            </ul>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
        (function () {
            var gh = window.__GITHUB_URL__ || "https://github.com/tbrownhe/parsetrail";
            var frontend = window.__FRONTEND_HOST__ || "https://dashboard.parsetrail.com";
            var ghLink = document.querySelector(".nav-github");
            if (ghLink && gh) ghLink.href = gh;
            var loginLink = document.querySelector(".nav-login");
            if (loginLink && frontend) loginLink.href = frontend;
        })();
    </script>

</body>

</html>
